# 프로세스와 스케쥴러2
## 프로세스의 구조
- 프로세스의 일반적인 구성
    - text(code) 영역 : 코드가 들어가는 영역
    - data : 변수/초기화된 데이터가 들어가는 영역
    - stack : 임시 데이터(함수 호출, 로컬 변수 등) 영역
    - heap : 코드에서 동적으로 만들어지는 데이터의 영역<br><br>
    
## 프로세스와 컴퓨터 구조
- PC(Program Counter) + SP(Stack Pointer)
        - PC : 다음 실행할 코드의 주소를 가지고 있음
        - SP : 스택 최상단의 주소를 가지고 있음
    - 임베디드 시스템에서 동작하는 C프로그램은 디버깅시 PC와 SP를 캡쳐해서 가지고 있는다.
    - 파이썬과 같은 언어에는 재귀함수 호출이 일정 횟수 이상 넘어가면 에러가 발생 --> 고정된 스택 공간 때문!<br><br>
    
- JAVA GC(Garbage Collector)와 프로세스 힙
    - JAVA GC가 필요한 이유
        - 불필요한 객체가 차지하는 힙 공간을 삭제하여 공간 확보!
        - 힙 공간이 부족하면 객체 생성이 불가하고, JAVA 같은 객체지향 프로그램은 작동하지 않는다!<br><br>
- **컨텍스트 스위칭**
    - Context Switching, 또는 문맥 교환
        - CPU에 실행할 프로세스를 교체하는 기술
    - PC, SP만 바꿔주면 프로세스 저장상태를 기반으로 실행 가능
    - 컨텍스트 스위칭 세부 동작
        1. 실행 중지할 프로세스 정보를 해당 프로세스의 PCB에 업데이트해서 메인 메모리에 저장
        2. 다음 실행할 프로세스 정보를 메인 메모리에 있는 해당 PCB 정보(PC,SP)를 CPU의 레지스터에 넣고, 실행!<br><br>
- Process Control Block(PCB)
    - PCB에 Process ID, Register(PC,SP 등)등의 정보를 저장
    - 프로세스가 실행중인 상태를 캡쳐/구조화해서 저장함<br><br>

## 프로세스간 커뮤니케이션(InterProcess Communication)
- 프로세스는 다른 프로세스의 공간을 접근할 수 없다.
- 프로세스간 통신이 필요한 이유?
    - 성능을 높이기 위해 여러 프로세스를 만들어서 동시에 실행
    - 이 때 프로세스간 상태 확인 및 데이터 송수신이 필요함!!
- 프로세스간 통신 방법을 제공하는 것이 IPC(InterProcess Communication)
- file을 사용할 수 있지만, 이 경우 실시간으로 직접 원하는 프로세스에 데이터 전달이 어려울 수 있다.
- **모든 프로세스는 0~4GB까지의 메모리 주소는 커널 공간을 공유하는데 사용!**<br><br>

## 다양한 IPC 기법
1. file 사용
2. Message Queue
3. Shared Memory
4. Pipe
5. Signal
6. Semaphore
7. Socket<br>
**--2번부터는 모두 커널 공간을 사용하는 것!!!--**<br><br>

## 공유 메모리(shared memory)
- kernel space에 메모리 공간을 만들고, 해당 공간을 변수처럼 사용하는 방식<br><br>

## 정리
- 여러 프로세스를 동시에 실행하는 방법으로 컴퓨터의 성능을 개선!
- 복잡한 프로그램을 위해 프로세스간 통신이 필요함
- 프로세스간 통신을 위한 기법(IPC : InterProcess Communication)
- 대부분의 IPC 기법은 커널 공간을 활용하는 것!!!
    - **커널 공간을 공유하기 때문!!!**